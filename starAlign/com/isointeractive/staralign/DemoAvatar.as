package com.isointeractive.staralign {	import flash.display.MovieClip;	import flash.events.Event;	import flash.geom.Vector3D;	import flash.geom.Point;		public class DemoAvatar extends MovieClip{		private var _stuckClip:MovieClip;		private var _vel:Vector3D;		private var _pos:Vector3D;		private var _grav:Vector3D;		private var _leftDown:Boolean;		private var _rightDown:Boolean;		private var pStageWidth = 1000;				private const AVATAR_SPEED:Number = 5;		public function DemoAvatar() {			_vel = new Vector3D();			_pos = new Vector3D();			_grav = new Vector3D();		}				public function updateAvatar():void{			//trace("Update Avatar: " + this.x + "," + this.y);			if(_stuckClip == null){				vel.x += grav.x;				vel.y += grav.y;			}						pos.x += vel.x;			pos.y += vel.y;						if(pos.x + this.width*.5 > pStageWidth){				pos.x = pStageWidth - this.width*.5;			}else if(pos.x - this.width*.5 < 0){				pos.x = this.width*.5;			}						updatePosition();		}				public function updatePosition():void{			this.x = pos.x;			this.y = pos.y;		}				public function stickAvatarTo(mc:MovieClip):void{			if(vel.y >= 0){				_stuckClip = mc;				trace("Stick avatar to: " + mc);			}		}				public function get stuckClip():MovieClip{			return _stuckClip;		}				public function get isStuck():Boolean{			if(_stuckClip != null){				return true;			}			return false;		}				public function get vel():Vector3D{			return _vel;		}				public function set vel(v:Vector3D):void{			_vel = v;		}				public function get pos():Vector3D{			return _pos;		}				public function set pos(p:Vector3D):void{			_pos = p;		}				public function get grav():Vector3D{			return _grav;		}				public function set grav(g:Vector3D):void{			_grav = g;		}				public function jump():void{			vel.y = -8;			_stuckClip = null;		}				public function set moveLeft(b:Boolean):void{			_leftDown = b;			if(_leftDown){				vel.x = -1*AVATAR_SPEED;			}else{				if(_rightDown){					vel.x = AVATAR_SPEED;				}else{					vel.x = 0;				}			}		}				public function set moveRight(b:Boolean):void{			_rightDown = b;			if(_rightDown){				vel.x = AVATAR_SPEED;			}else{				if(_leftDown){					vel.x = -1*AVATAR_SPEED;				}else{					vel.x = 0;				}			}		}	}	}