package com.isointeractive.staralign{	import flash.display.MovieClip;	import flash.events.Event;	public class StarField extends MovieClip {		private static const MAX_SPEED:Number = 20;		private var constellationStars:Object;		private var pStageWidth = 1000;				public function StarField() {			while (this.numChildren > 0) {				this.removeChildAt(0);			}			populateSky();			//this.addEventListener(Event.ENTER_FRAME, updateStars);			constellationStars = new Object();		}		//		private function updateStars(evt:Event):void {			//trace(_starArray.length);			var clr:Number;			var rand:Number;			var s:StarMC;			if (Math.random() > .85) {				clr = 0xFFFFFF;				rand = Math.random();				if (rand < .15) {					clr = 0xFF0000;				} else if (rand < .3) {					clr = 0x00FF00;				} else if (rand < .45) {					clr = 0x0000FF;				}				s = new StarMC();				s.addEventListener(StarAlignEvent.KILL_STAR, removeStar);				s.setColor(clr);				s.initializeRandomStar(pStageWidth, 350);				this.addChild(s);				s.setStarPath(MAX_SPEED/s.scaleX, s.x-pStageWidth-s.width*2);			}			for (var i:int = 0; i < this.numChildren; i++) {				var child = this.getChildAt(i);				if (child is StarMC) {					child.glowCheck();				}			}		}		private function removeStar(evt:StarAlignEvent):void {			this.removeChild(StarMC(evt.currentTarget));		}		private function populateSky():void {			for (var i:int = 0; i < 100; i++) {				var clr:Number = 0xFFFFFF;				var rand:Number = Math.random();				if (rand < .15) {					clr = 0xFF0000;				} else if (rand < .3) {					clr = 0x00FF00;				} else if (rand < .45) {					clr = 0x0000FF;				}				var s:StarMC = new StarMC();				s.addEventListener(StarAlignEvent.KILL_STAR, removeStar);				s.setColor(clr);				s.initializeRandomStar(1000, 350, true);				this.addChild(s);				s.setStarPath(MAX_SPEED/s.scaleX, s.x-1000-s.width*2);			}		}		//		public function createConstellationStar(yPos:Number = 100, clr:Number = 0xFFFFFF, stoneNum:int = 0, speed:int = 30, id:int = 0) {			var clr:Number;			var rand:Number;			var s:StarMC;			clr = 0xFFFFFF;			rand = Math.random();			if (rand < .333) {				clr = 0xFF0000;			} else if (rand < .666) {				clr = 0x00FF00;			} else {				clr = 0x0000FF;			}			s = new StarMC();			s.addEventListener(StarAlignEvent.KILL_STAR, removeStar);			s.setConstellationColor(clr);			s.initializeConstellationStar(stage.stageWidth, yPos);			this.addChild(s);			s.setStarPath(speed, s.x-stage.stageWidth-s.width*2, stage.stageWidth*.5);			var param:Object = new Object();			param.time = speed;			param.color = clr;			param.stone = stoneNum;			dispatchEvent(new StarAlignEvent(StarAlignEvent.GLOW_STONE_ACTIVATE, param));			constellationStars[id] = s;		}		public function activateStar(id:int):void {			if (constellationStars[id] != null) {				constellationStars[id].activateHighlight();			}		}	}}