package scripts.game.spawnObjects{	import flash.display.MovieClip;	import flash.events.*;	import flash.display.Stage;	import flash.geom.Point;	import flash.display.BitmapData;	import flash.geom.Rectangle;	//	public class moteSpawn extends MovieClip {		private var pRoot:Object = null;		private var pRoomObj:Object = null;		private var pId:int = 0;		private var pState:int = 1;		private var pType:int = 1;		private var pCycle1:int = 0;		private var x0:int = 0;		private var y0:int = 0;		private var x1:Number = 0;		private var y1:Number = 0;		private var dx:Number = 0;		private var dy:Number = 0;		private var pGravity:Number = 0.25;		public function moteSpawn():void {			return;		}		//		public function init(vRoot:Object, vRoomObj:Object, vId:int, vType:int, vState:int, lx:int, ly:int):void {			//trace("moteSpawn: init");			pRoot = vRoot;			pRoomObj = vRoomObj;			pId = vId;			pType = vType;			pState = vState;			pType = vType;			x0 = lx;			y0 = ly;			x1 = lx;			y1 = ly;			this.x = x1;			this.y = y1;			var colorArray:Array = ["red","green","blue"];			gotoAndPlay(colorArray[(vType - 1)]);			this.visible = false;		}		//		public function enterframe():void {			switch (this.pState) {				case 0 :				case 1 :					fall();					break;				case 2 :					waitForCapture();					break;				case 3 :					break;				default :					break;			}			this.x = x1;			this.y = y1;			return;		}		private function fall():void {			x1 = x1 + dx;			y1 = y1 + dy;			dy = dy + pGravity;			if (dy > 6) {				dy = 6;			}			var collide:int = pRoomObj.gCollisionBMD.getPixel32(x1,y1);			if (collide != 0) {				startWait();			}			this.x = x1;			this.y = y1;		}		//		private function startWait():void {			this.visible = true;			y1 = pRoomObj.findAltitude(x1,y1) - 24;			x0 = x1;			y0 = y1;			randomizeDxDy();			pState = 2;			return;		}		//		private function randomizeDxDy():void {			dx = (pRoot.rand() - pRoot.rand()) * 0.6;			dy = (pRoot.rand() - pRoot.rand()) * 0.6;			return;		}		//		private function waitForCapture():void {			var lx2:int = 0;			var ly2:int = 0;			var onScreen:Boolean = pRoomObj.pointOnScreen(x1,y1);			if (onScreen) {				this.visible = true;				if (x1 > x0) {					dx = dx - 0.04;				} else {					dx = dx + 0.04;				}				if (y1 > y0) {					dy = dy - 0.02;				} else {					dy = dy + 0.02;				}				x1 = x1 + dx;				y1 = y1 + dy;				pCycle1++;				if (pCycle1 == 7) {					pCycle1 = 0;					randomizeDxDy();				}				this.x = x1;				this.y = y1;				if (pRoot.pMyAvatar) {					lx2 = pRoot.pMyAvatar.x1;					ly2 = pRoot.pMyAvatar.y1;					var distx:int = Math.abs(x0 - lx2);					var disty:int = Math.abs(y0 - ly2);					if (distx < 20 && disty < 30) {						pRoot.claimSpawn(pId);						pState = 3;					}				}			} else {				this.visible = false;			}		}		//		private function spawnClaimed():void {			deleteMe();		}		//		public function deleteMe():void {			//trace("mote : deleteMe");			if (pState != -1) {				pId = 0;				pRoot = null;				pRoomObj = null;				pAvatar = null;				pState = -1;				parent.removeChild(this);			}		}	}}//