package scripts.game.spawnObjects{	import flash.display.Sprite;	import flash.events.*;	import flash.display.Stage;	import flash.geom.Point;	import flash.display.BitmapData;	import flash.geom.Rectangle;	//	public class goodsSpawn extends Sprite {		private var pRoot:Object = null;		private var pRoomObj:Object = null;		private var bmd:BitmapData;		private var pId:int = 0;		private var pState:int = 1;		private var pType:int = 1;		private var pSheetName:String = "pSpawnRed";		private var x1:int = 0;		private var y1:int = 0;		private var regPnt:Point = new Point(0,0);		private var pRect:Rectangle = null;		//		public function goodsSpawn():void {		}		//		public function init(vRoot:Object, vRoomObj:Object, id:int, vType:int, vState:int, vx1:int, vy1:int):void {			trace("goodsItem: init = " + [vx1,vy1]);			pRoot = vRoot;			pRoomObj = vRoomObj;			pId = id;			pType = vType;			pState = vState;			x1 = vx1;			y1 = vy1;			switch (vType) {				case 1 :					pSheetName = "pScrollBlue";					break;				case 2 :					pSheetName = "pScrollBlue";					break;				case 3 :					pSheetName = "pScrollBlue";					break;			}			bmd = pRoot.pSpriteSheets[pSheetName][0];			pRect = bmd.rect;			pType = vType;		}		//		public function enterframe():void {			if (pRoot) {				if (pRoot.pMyAvatar) {					switch (pState) {						case 0 :							break;						case 1 :							waitForCapture();							blit();							break;					}				}			}		}		private function waitForCapture():void {			//check for collisions with hero			var lx:int = pRoot.pMyAvatar.x1;			var diffx:int = Math.abs(x1-lx);			if (diffx<20) {				var ly:int = pRoot.pMyAvatar.y1;				var diffy:int = Math.abs(y1-ly);				if (diffy<30 && !pRoot.gIsGuest) {					pRoot.claimGoodsItemById(pId);					spawnClaimed();					pState = 3;				}			}		}		//		public function spawnClaimed():void {			deleteMe();		}		//		private function blit():void {			if (bmd) {				var pnt:Point = new Point(Math.round(x1),Math.round(y1));				pRoomObj.blitSprite(bmd, pRect, pnt);			}		}		//		public function deleteMe():void {			//pRoot.removeMoteById(pId);			pId = 0;			pRoot = null;			pRoomObj = null;			pAvatar = null;			pState = -1;			pRect = null;			bmd = null;		}		//	}}//