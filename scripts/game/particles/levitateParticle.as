package scripts.game.particles{	import flash.display.Sprite;	import flash.events.*;	import flash.display.Stage;	import flash.geom.Point;	import flash.display.BitmapData;	import flash.geom.Rectangle;	public class levitateParticle extends Sprite {		private var pRoot:Object = null;		private var pRoomObj:Object = null;		private var pParentScroll:Object = null;		private var bmd:BitmapData;		private var pRect:Rectangle = null;		private var pPnt:Point;		private var x0:int = 0;		private var y0:int = 0;		private var x1:Number = 0;		private var y1:Number = 0;		private var dx:Number = 0;		private var dy:Number = 0;		private var pFrm:int = 1;		private var pState:int = 1;		private var pCycle1:int = 1;		private var pCycle2:int = 1;		private var pWaitRandom:int = 20;		public function levitateParticle():void {			pPnt = new Point(0,0);		}		//		public function init(vRoot:Object, vRoomObj:Object, vParentScroll:Object):void {			//trace("levitateParticle: init");			pRoot = vRoot;			pRoomObj = vRoomObj;			pParentScroll = vParentScroll;			bmd = pRoot.pSpriteSheets["levitateParticle"][0];			pRect = bmd.rect;			startWait();			return;		}		private function pickRandomLoc():void {			//trace ("pickRandomLoc");			if (pParentScroll) {				x0 = pParentScroll.x1;				y0 = pParentScroll.y1;				dy = pRoot.rand();				dx = (pRoot.rand() - pRoot.rand()) * 1;				x1 = x0 + dx * 16;				y1 = y0 + dy * 16;				pFrm = 1;				pState = 2;				if (pParentScroll.pState ==-1){					deleteMe();				}			} else {				deleteMe();			}		}		public function enterframe():void {			switch (pState) {				case 1 :					wait();					break;				case 2 :					blit();					break;				default :					break;			}		}		private function startWait():void {			pWaitRandom = pRoot.rand() * 30;			pState = 1;			pCycle1 = 1;		}		//		private function wait():void {			pCycle1++;			if (pCycle1 > pWaitRandom) {				pickRandomLoc();			}		}		//		private function blit():void {			x1 = x1 + dx;			y1 = y1 + dy;			pCycle2 = 0;			pFrm++;			bmd = pRoot.pSpriteSheets["levitateParticle"][pFrm];			if (pFrm > 39) {				startWait();			}			if (bmd) {				pPnt.x = Math.round(x1);				pPnt.y = Math.round(y1);				pRoomObj.blitSprite(bmd, pRect, pPnt);			}		}		public function deleteMe():void {			if (pState != -1) {				pRoot = null;				pRoomObj = null;				pParentScroll = null;				bmd = null;				pRect = null;				pState = -1;				if (parent) {					parent.removeChild(this);				}			}		}		//	}}