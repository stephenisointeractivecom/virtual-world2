package scripts.closet {	import com.smartfoxserver.v2.entities.data.ISFSObject;	import com.smartfoxserver.v2.entities.data.SFSObject;	import com.smartfoxserver.v2.requests.ExtensionRequest;	import flash.display.*;	import flash.display.MovieClip;	import flash.events.*;	import flash.display.Stage;	import flash.text.TextField;	import flash.events.MouseEvent;	import flash.media.Sound;	import flash.media.SoundMixer;	import flash.media.SoundTransform;	import flash.net.SharedObject;	import flash.net.URLRequest;	import flash.net.URLLoader;	import flash.filters.*;	import flash.geom.ColorTransform;	import flash.utils.getQualifiedClassName;	//	public class closet extends MovieClip {		public var pRoot:Object = null;		private var pFlare:int = 1;		private var pAction:int = 0;		public var pAvatar:Object = null;		private var gLoader:Loader = new Loader  ;		private var pIconScroll:int = 0;		private var pClothingArray:Array = [];		private var pClothingType:String = "";		public var pClothingHolder:Object = null;		public var pHeroClothing:Object = {};		public var pClothingObjects:Object = {};		public var pArrayHair:Array = [];		public var pArrayShirt:Array = [];		public var pArrayPants:Array = [];		public var pArrayShoes:Array = [];		//		public function closet():void {			stop();			clearAllIcons();			//initDevVersionA();		}		//		public function init(vRoot:Object):void {			traceOut("closet init");			pRoot = vRoot;			pAvatar = new avatarBaseMC  ;			pAvatar.init(0, 1, pRoot, pRoot.stage, this, "closetAvatar", false, false, 330,160, 2, pRoot.pMyAvatarColors, pRoot.pMyAvatarItems);			changeClothingType("hairBtn");		}		//		public function changeClothingType(btnName:String):void {			traceOut ("changeClothingType");			var clothArray:Array = [];			deselectType();			this[btnName].selectBtn();			if (pRoot) {				switch (btnName) {					case "hairBtn" :						pClothingArray = pRoot.pArrayHair;						pClothingType = "hair";						break;					case "shirtBtn" :						pClothingArray = pRoot.pArrayShirt;						pClothingType = "shirt";						break;					case "pantsBtn" :						pClothingArray = pRoot.pArrayPants;						pClothingType = "pants";						break;					case "shoesBtn" :						pClothingArray = pRoot.pArrayShoes;						pClothingType = "shoes";						break;				}			}			pIconScroll = 0;			loadClothingIcons();		}		//		private function deselectType():void {			this.hairBtn.deselectBtn();			this.shirtBtn.deselectBtn();			this.pantsBtn.deselectBtn();			this.shoesBtn.deselectBtn();		}		//;		public function iconBtnClick(vNum:int, vType:String):void {			traceOut("iconBtnClick = " + [vNum, vType]);			pAvatar.changeClothing(vType, vNum);			trace('update db ' + vType);			var obj:ISFSObject = new SFSObject();			switch (vType) {				case "hair":					obj.putUtfString("cmd2", "UpdateHairStyle");					obj.putInt("HairId", vNum);					break;				case 'shirt':					obj.putUtfString("cmd2", "ChangeClothingItem");					obj.putInt("clotheId", vNum);					obj.putInt("clotheType", 1);					break;				case 'pants':					obj.putUtfString("cmd2", "ChangeClothingItem");					obj.putInt("clotheId", vNum);					obj.putInt("clotheType", 2);					break;				case 'shoes':					obj.putUtfString("cmd2", "ChangeClothingItem");					obj.putInt("clotheId", vNum);					obj.putInt("clotheType", 3);					break;			}			pRoot.smartFox.send(new ExtensionRequest("set", obj));		}		//		private function loadClothingIcons():void {			clearAllIcons();			var L:int = pClothingArray.length + 1;			var vType:String = pClothingType;			for (var i:int=1; i<11; i++) {				var itemNum = i + pIconScroll;				if (itemNum<pClothingArray.length) {					var iconName:String = "icon_" + i;					var target1:Object = this[iconName];					target1.pSwf = nme;					target1.pItemNum = itemNum;					target1.pItemType = pClothingType;					var target2:Object = this[iconName].iconHolder;					var nme:String = pClothingArray[itemNum];					var cl:Class = pRoot.pClothingObjects[nme];					//traceOut ([nme, cl]);					if (cl) {						var obj:Object = new cl  ;						target2.addChild(obj);						clothingIconLoaded(obj);					}				}			}			trace (pClothingArray);		}		//		private function clearAllIcons():void {			for (var i:int=1; i<11; i++) {				var mc:Object = this["icon_" + i];				mc.clearGraphic();			}		}		//		private function clothingIconLoaded(mc:Object):void {			mc.icon_1.visible = false;		}		//		public function scrollIconsRight():void {			var L:int = pClothingArray.length;			if (L>10) {				pIconScroll = pIconScroll + 1;				var n:int = L - 11;				if (pIconScroll>n) {					pIconScroll = n;				}				loadClothingIcons();			}		}		//		public function scrollIconsLeft():void {			pIconScroll = pIconScroll - 1;			if (pIconScroll<0) {				pIconScroll = 0;			}			loadClothingIcons();		}		//		public function changeAvatarTint (vType:String, n:int):void{			pAvatar.changeAvatarTint(vType, n);		}		//------------------------------------------------------------------------------------------------------------------------		//------------------------------------------------------------------------------------------------------------------------		// tracing		//------------------------------------------------------------------------------------------------------------------------		//------------------------------------------------------------------------------------------------------------------------		private function traceOut(txt1) {			var txt2:String = "Closet: " + txt1;			trace(txt2);		}		//	}}//